<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GameDev Survival Guide - My Journey</title>
    <meta name="description" content="A personal journey through the video game industry, documenting the path from Junior to Mastery." />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;600;700;900&family=Cinzel:wght@400;600;700;900&family=MedievalSharp&display=swap');
      
      /* Sci-Fi Theme (Default) */
      :root {
        /* Gaming color palette */
        --bg-primary: #0a0614;
        --bg-secondary: #1a0b2e;
        --bg-accent: #2b1055;
        
        /* Neon gaming colors */
        --neon-pink: #ff006e;
        --neon-blue: #3a86ff;
        --neon-cyan: #00f5ff;
        --neon-green: #00ff88;
        --neon-yellow: #ffbe0b;
        --neon-purple: #c77dff;
        --neon-orange: #fb5607;
        
        /* Text colors */
        --text-primary: #ffffff;
        --text-secondary: #e4c1ff;
        --text-muted: #9d79bc;
        
        /* UI elements */
        --border: rgba(255, 0, 110, 0.3);
        --border-hover: rgba(0, 245, 255, 0.6);
        
        /* Gradients */
        --gradient-pink: linear-gradient(135deg, #ff006e, #c77dff);
        --gradient-blue: linear-gradient(135deg, #3a86ff, #00f5ff);
        --gradient-green: linear-gradient(135deg, #00ff88, #00f5ff);
        --gradient-rainbow: linear-gradient(135deg, #ff006e, #ffbe0b, #00ff88, #00f5ff, #3a86ff, #c77dff);
        
        /* Effects */
        --shadow-neon-pink: 0 0 20px rgba(255, 0, 110, 0.5);
        --shadow-neon-blue: 0 0 20px rgba(58, 134, 255, 0.5);
        --shadow-neon-cyan: 0 0 20px rgba(0, 245, 255, 0.5);
        --shadow-lg: 0 20px 40px rgba(0,0,0,0.5);
        
        /* Sizing */
        --radius-sm: 8px;
        --radius-md: 12px;
        --radius-lg: 20px;
        
        /* Animation */
        --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
        
        /* Font families */
        --font-primary: 'Orbitron', monospace;
        --font-retro: 'Press Start 2P', cursive;
      }
      
      /* RPG Theme */
      [data-theme="rpg"] {
        /* Medieval/Fantasy color palette */
        --bg-primary: #1a0f0a;
        --bg-secondary: #2c1810;
        --bg-accent: #3d2419;
        
        /* RPG colors */
        --neon-pink: #c9302c;
        --neon-blue: #4169e1;
        --neon-cyan: #6495ed;
        --neon-green: #228b22;
        --neon-yellow: #daa520;
        --neon-purple: #8b008b;
        --neon-orange: #ff8c00;
        
        /* Text colors */
        --text-primary: #f4e4c1;
        --text-secondary: #d4af37;
        --text-muted: #8b7355;
        
        /* UI elements */
        --border: rgba(218, 165, 32, 0.4);
        --border-hover: rgba(255, 215, 0, 0.6);
        
        /* Gradients */
        --gradient-pink: linear-gradient(135deg, #8b0000, #dc143c);
        --gradient-blue: linear-gradient(135deg, #191970, #4169e1);
        --gradient-green: linear-gradient(135deg, #228b22, #32cd32);
        --gradient-rainbow: linear-gradient(135deg, #8b0000, #ff8c00, #ffd700, #228b22, #4169e1, #8b008b);
        
        /* Effects */
        --shadow-neon-pink: 0 0 20px rgba(220, 20, 60, 0.5);
        --shadow-neon-blue: 0 0 20px rgba(65, 105, 225, 0.5);
        --shadow-neon-cyan: 0 0 20px rgba(100, 149, 237, 0.5);
        --shadow-lg: 0 20px 40px rgba(0,0,0,0.7);
        
        /* Font families */
        --font-primary: 'Cinzel', serif;
        --font-retro: 'MedievalSharp', cursive;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        font-size: 16px;
        scroll-behavior: smooth;
      }

      body {
        min-height: 100vh;
        font-family: var(--font-primary);
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        position: relative;
        overflow-x: hidden;
        transition: background-color var(--transition-slow), color var(--transition-slow);
      }

      /* Animated starfield background for sci-fi theme */
      body:not([data-theme="rpg"])::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
          radial-gradient(2px 2px at 20% 30%, white, transparent),
          radial-gradient(2px 2px at 60% 70%, white, transparent),
          radial-gradient(1px 1px at 50% 50%, white, transparent),
          radial-gradient(1px 1px at 80% 10%, white, transparent),
          radial-gradient(2px 2px at 90% 60%, white, transparent);
        background-size: 200% 200%;
        background-repeat: repeat;
        animation: stars 120s linear infinite;
        opacity: 0.3;
        pointer-events: none;
        z-index: 0;
      }
      
      /* Parchment texture background for RPG theme */
      body[data-theme="rpg"]::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(139, 69, 19, 0.03) 2px,
            rgba(139, 69, 19, 0.03) 4px
          ),
          repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(139, 69, 19, 0.03) 2px,
            rgba(139, 69, 19, 0.03) 4px
          ),
          radial-gradient(ellipse at center, rgba(218, 165, 32, 0.05), transparent);
        pointer-events: none;
        z-index: 0;
      }

      /* Grid overlay effect for sci-fi */
      body:not([data-theme="rpg"])::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
          linear-gradient(rgba(0, 245, 255, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0, 245, 255, 0.03) 1px, transparent 1px);
        background-size: 50px 50px;
        pointer-events: none;
        z-index: 0;
        animation: grid 20s linear infinite;
      }
      
      /* Ornamental border effect for RPG */
      body[data-theme="rpg"]::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
          linear-gradient(rgba(218, 165, 32, 0.02) 2px, transparent 2px),
          linear-gradient(90deg, rgba(218, 165, 32, 0.02) 2px, transparent 2px);
        background-size: 100px 100px;
        pointer-events: none;
        z-index: 0;
      }

      @keyframes stars {
        from { transform: translateY(0); }
        to { transform: translateY(-100%); }
      }

      @keyframes grid {
        from { transform: translate(0, 0); }
        to { transform: translate(50px, 50px); }
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1440px;
        margin: 0 auto;
        padding: 2rem 1.5rem 4rem;
      }

      /* Header with retro gaming style */
      .hero {
        background: linear-gradient(135deg, rgba(255, 0, 110, 0.1), rgba(0, 245, 255, 0.1)),
                    var(--bg-secondary);
        border: 2px solid var(--neon-pink);
        border-radius: var(--radius-lg);
        padding: 3rem 2rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
        box-shadow: 
          inset 0 0 50px rgba(255, 0, 110, 0.1),
          0 0 30px rgba(255, 0, 110, 0.3);
      }

      .hero::before {
        content: "üéÆ";
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.3;
      }

      .hero::after {
        content: "üïπÔ∏è";
        position: absolute;
        bottom: 20px;
        left: 20px;
        font-size: 3rem;
        opacity: 0.3;
      }

      .hero h1 {
        font-family: var(--font-retro);
        font-size: 2rem;
        background: var(--gradient-rainbow);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: 2px;
        position: relative;
      }

      @media (min-width: 768px) {
        .hero h1 {
          font-size: 2.5rem;
        }
      }

      .hero p {
        color: var(--text-secondary);
        font-size: 1.125rem;
        max-width: 65ch;
        position: relative;
        font-weight: 400;
      }

      /* Character Section */
      .character-section {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      @media (min-width: 768px) {
        .character-section {
          flex-direction: row;
          align-items: flex-start; /* This makes panels have independent heights */
        }
      }

      /* Character Card */
      .character-card {
        background: linear-gradient(135deg, rgba(43, 16, 85, 0.8), rgba(26, 11, 46, 0.9));
        backdrop-filter: blur(10px);
        border: 2px solid;
        border-image: var(--gradient-blue) 1;
        border-radius: var(--radius-md);
        padding: 1.5rem;
        box-shadow: 
          inset 0 0 30px rgba(58, 134, 255, 0.1),
          0 0 40px rgba(58, 134, 255, 0.2);
        width: 300px;
        flex-shrink: 0;
      }

      .character-avatar {
        font-size: 4rem;
        text-align: center;
        margin-bottom: 1rem;
      }

      .character-name {
        font-family: var(--font-retro);
        font-size: 1rem;
        color: var(--neon-cyan);
        text-align: center;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 10px var(--neon-cyan);
      }

      .character-class {
        text-align: center;
        color: var(--text-secondary);
        margin-bottom: 1rem;
        font-size: 0.9rem;
      }

      .character-level {
        text-align: center;
        font-size: 1.5rem;
        color: var(--neon-yellow);
        text-shadow: 0 0 10px var(--neon-yellow);
        margin-bottom: 1rem;
      }

      .traits-list {
        list-style: none;
        padding: 0;
      }

      .trait-item {
        background: rgba(0, 245, 255, 0.1);
        border: 1px solid rgba(0, 245, 255, 0.3);
        border-radius: var(--radius-sm);
        padding: 0.5rem;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .trait-icon {
        font-size: 1.2rem;
      }

      /* Curses Section */
      .curses-section {
        margin-top: 1rem;
      }

      .curses-title {
        color: var(--neon-pink);
        font-size: 0.875rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 5px var(--neon-pink);
      }

      .curses-list {
        list-style: none;
        padding: 0;
      }

      .curse-item {
        background: rgba(255, 0, 110, 0.05);
        border: 1px solid rgba(255, 0, 110, 0.2);
        border-radius: var(--radius-sm);
        padding: 0.5rem;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .curse-icon {
        font-size: 1.2rem;
      }

      /* Stats Section */
      .stats-panel {
        background: linear-gradient(135deg, rgba(255, 0, 110, 0.1), rgba(0, 245, 255, 0.1));
        border: 1px solid rgba(255, 0, 110, 0.3);
        border-radius: var(--radius-sm);
        padding: 1rem;
        margin-top: 1rem;
      }

      .stat-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
      }

      .stat-label {
        color: var(--text-secondary);
      }

      .stat-value {
        color: var(--neon-green);
        font-weight: 700;
        text-shadow: 0 0 5px var(--neon-green);
      }

      /* Quest Board Container */
      .quest-board-container {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        flex: 1;
      }

      @media (min-width: 1280px) {
        .quest-board-container {
          flex-direction: row;
          align-items: flex-start; /* This makes panels have independent heights */
        }
      }

      /* Quest Map Panel */
      .quest-map-panel {
        background: linear-gradient(135deg, rgba(43, 16, 85, 0.8), rgba(26, 11, 46, 0.9));
        backdrop-filter: blur(10px);
        border: 2px solid;
        border-image: var(--gradient-blue) 1;
        border-radius: var(--radius-md);
        box-shadow: 
          inset 0 0 30px rgba(58, 134, 255, 0.1),
          0 0 40px rgba(58, 134, 255, 0.2);
        overflow: hidden;
        position: relative;
        width: 360px;
        flex-shrink: 0;
      }

      .map-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.25rem;
        border-bottom: 2px solid rgba(0, 245, 255, 0.3);
        background: linear-gradient(90deg, rgba(255, 0, 110, 0.1), rgba(0, 245, 255, 0.1));
      }

      .map-title {
        font-weight: 700;
        color: var(--neon-yellow);
        text-shadow: 0 0 10px var(--neon-yellow);
        font-size: 1.125rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .map-controls {
        display: flex;
        gap: 0.5rem;
      }

      .map-btn {
        background: rgba(0, 245, 255, 0.1);
        border: 1px solid rgba(0, 245, 255, 0.3);
        color: var(--text-primary);
        padding: 0.5rem 1rem;
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-family: inherit;
        font-size: 0.875rem;
        transition: all var(--transition-fast);
      }

      .map-btn:hover {
        background: rgba(0, 245, 255, 0.2);
        box-shadow: 0 0 10px rgba(0, 245, 255, 0.5);
      }

      /* Quest Map SVG Container */
      .quest-map {
        padding: 0.5rem;
        height: 600px;
        position: relative;
        overflow-y: auto;
        overflow-x: hidden;
        width: 100%;
      }

      #questBoard {
        width: 100%;
        height: auto;
        display: block;
      }

      .level-icon-badge {
        font-size: 12px;
        pointer-events: none;
      }

      /* SVG Styles */
      .level-rect {
        cursor: pointer;
        transition: all var(--transition-fast);
        stroke-width: 2;
        rx: 8;
        ry: 8;
      }

      .level-rect:hover {
        filter: brightness(1.2);
        stroke-width: 3;
      }

      .level-rect.completed {
        stroke: var(--neon-green);
        stroke-width: 3;
        filter: drop-shadow(0 0 10px var(--neon-green));
      }

      .level-rect.current {
        stroke: var(--neon-yellow);
        stroke-width: 3;
        filter: drop-shadow(0 0 15px var(--neon-yellow));
        animation: pulse 2s ease-in-out infinite;
      }

      .level-rect.locked {
        fill: #2c3e50 !important;
        opacity: 0.6;
        stroke: rgba(157, 121, 188, 0.3);
        stroke-dasharray: 5, 5;
      }

      .arrow-path {
        stroke: var(--neon-cyan);
        stroke-width: 2;
        fill: none;
        opacity: 0.5;
      }

      .arrow-head {
        fill: var(--neon-cyan);
        opacity: 0.5;
      }

      .level-group {
        cursor: pointer;
      }

      @keyframes pulse {
        0%, 100% { 
          stroke-width: 3;
          filter: drop-shadow(0 0 15px var(--neon-yellow));
        }
        50% { 
          stroke-width: 5;
          filter: drop-shadow(0 0 25px var(--neon-yellow));
        }
      }

      .level-text {
        fill: var(--text-primary);
        font-family: var(--font-primary);
        pointer-events: none;
      }

      .level-number {
        font-size: 24px;
        font-weight: 900;
        fill: rgba(255, 255, 255, 0.9);
      }

      .level-name {
        font-size: 12px;
        font-weight: 700;
        fill: var(--text-primary);
      }

      .level-year {
        font-size: 10px;
        fill: rgba(255, 255, 255, 0.7);
      }

      .level-role {
        font-size: 10px;
        fill: rgba(255, 255, 255, 0.8);
        font-weight: 600;
      }

      .level-emoji {
        font-size: 20px;
      }

      #questBoard {
        width: 100%;
        height: 100%;
        min-height: 600px;
      }

      /* Quest Details Panel */
      .quest-details-panel {
        background: linear-gradient(135deg, rgba(43, 16, 85, 0.8), rgba(26, 11, 46, 0.9));
        backdrop-filter: blur(10px);
        border: 2px solid;
        border-image: var(--gradient-pink) 1;
        border-radius: var(--radius-md);
        box-shadow: 
          inset 0 0 30px rgba(255, 0, 110, 0.1),
          0 0 40px rgba(255, 0, 110, 0.2);
        flex: 1;
        min-width: 0;
      }

      .details-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.25rem;
        border-bottom: 2px solid rgba(255, 0, 110, 0.3);
        background: linear-gradient(90deg, rgba(255, 0, 110, 0.1), rgba(0, 245, 255, 0.1));
      }

      .details-title {
        font-weight: 700;
        color: var(--neon-pink);
        text-shadow: 0 0 10px var(--neon-pink);
        font-size: 1.125rem;
      }

      .quest-content {
        padding: 1.5rem;
        min-height: 400px;
      }

      .quest-header {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--neon-cyan);
        text-shadow: 0 0 10px var(--neon-cyan);
        margin-bottom: 0.5rem;
      }

      .quest-year {
        color: var(--text-secondary);
        font-size: 0.875rem;
        margin-bottom: 1rem;
      }

      .quest-description {
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      .quest-objectives {
        background: rgba(0, 245, 255, 0.1);
        border: 1px solid rgba(0, 245, 255, 0.3);
        border-radius: var(--radius-sm);
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .objectives-title {
        color: var(--neon-green);
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 5px var(--neon-green);
      }

      .objective-item {
        color: var(--text-secondary);
        padding: 0.25rem 0;
        font-size: 0.875rem;
      }

      .objective-item::before {
        content: "‚ñ∏ ";
        color: var(--neon-green);
        font-weight: bold;
      }

      .quest-skills {
        background: rgba(255, 0, 110, 0.1);
        border: 1px solid rgba(255, 0, 110, 0.3);
        border-radius: var(--radius-sm);
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .skills-title {
        color: var(--neon-yellow);
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 5px var(--neon-yellow);
      }

      .skill-tag {
        display: inline-block;
        background: rgba(255, 190, 11, 0.2);
        border: 1px solid rgba(255, 190, 11, 0.5);
        border-radius: 20px;
        padding: 0.25rem 0.75rem;
        margin: 0.25rem;
        font-size: 0.75rem;
        color: var(--neon-yellow);
      }

      .quest-action-btn {
        width: 100%;
        background: var(--gradient-green);
        border: none;
        color: var(--bg-primary);
        padding: 1rem;
        border-radius: var(--radius-sm);
        font-family: var(--font-retro);
        font-size: 0.875rem;
        cursor: pointer;
        transition: all var(--transition-fast);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 1rem;
      }

      .quest-action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5);
      }

      .quest-action-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: linear-gradient(135deg, #666, #999);
      }

      /* Story Modal */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(10, 6, 20, 0.95);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }

      .modal-overlay.active {
        display: flex;
        animation: fadeIn var(--transition-base);
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      .story-modal {
        background: linear-gradient(135deg, rgba(43, 16, 85, 0.95), rgba(26, 11, 46, 0.98));
        border: 2px solid var(--neon-purple);
        border-radius: var(--radius-lg);
        max-width: 800px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 
          inset 0 0 50px rgba(199, 125, 255, 0.2),
          0 0 50px rgba(199, 125, 255, 0.5);
        animation: slideUp var(--transition-slow);
      }

      @keyframes slideUp {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal-header {
        padding: 1.5rem;
        border-bottom: 2px solid rgba(199, 125, 255, 0.3);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        font-family: var(--font-retro);
        font-size: 1rem;
        color: var(--neon-purple);
        text-shadow: 0 0 10px var(--neon-purple);
      }

      .modal-close {
        background: none;
        border: none;
        color: var(--text-primary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: all var(--transition-fast);
      }

      .modal-close:hover {
        color: var(--neon-pink);
        transform: scale(1.2);
      }

      .modal-body {
        padding: 2rem;
      }

      .story-type {
        display: inline-block;
        background: rgba(255, 0, 110, 0.2);
        border: 1px solid var(--neon-pink);
        border-radius: 20px;
        padding: 0.25rem 0.75rem;
        font-size: 0.75rem;
        color: var(--neon-pink);
        margin-bottom: 1rem;
      }

      .story-content {
        color: var(--text-primary);
        line-height: 1.8;
        margin-bottom: 1.5rem;
      }

      .story-lesson {
        background: rgba(0, 255, 136, 0.1);
        border-left: 3px solid var(--neon-green);
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .story-lesson-title {
        color: var(--neon-green);
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 0 5px var(--neon-green);
      }

      .story-lesson-text {
        color: var(--text-secondary);
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 2rem 0;
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      footer::before {
        content: "üöÄ ";
      }

      footer a {
        color: var(--neon-purple);
        text-decoration: none;
        transition: all var(--transition-fast);
      }

      footer a:hover {
        color: var(--neon-pink);
        text-shadow: 0 0 10px currentColor;
      }

      /* Accessibility */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Loading animation */
      @keyframes arcade-blink {
        0%, 49% { opacity: 1; }
        50%, 100% { opacity: 0; }
      }

      .blink {
        animation: arcade-blink 1s infinite;
      }

      /* Empty state */
      .empty-state {
        text-align: center;
        padding: 3rem;
        color: var(--text-muted);
      }

      .empty-state-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        opacity: 0.5;
      }

      .empty-state-text {
        font-style: italic;
      }
      
      /* Theme Toggle */
      .theme-toggle {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: linear-gradient(135deg, rgba(43, 16, 85, 0.9), rgba(26, 11, 46, 0.9));
        backdrop-filter: blur(10px);
        border: 2px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 0.75rem 1rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }
      
      .theme-toggle-label {
        color: var(--text-secondary);
        font-size: 0.875rem;
        font-weight: 600;
        user-select: none;
      }
      
      .theme-buttons {
        display: flex;
        gap: 0.5rem;
      }
      
      .theme-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid var(--border);
        color: var(--text-primary);
        padding: 0.5rem 1rem;
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-family: var(--font-primary);
        font-size: 0.875rem;
        transition: all var(--transition-fast);
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      
      .theme-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }
      
      .theme-btn.active {
        background: var(--gradient-blue);
        border-color: var(--neon-cyan);
        box-shadow: 0 0 15px rgba(0, 245, 255, 0.5);
      }
      
      /* RPG theme specific styles */
      [data-theme="rpg"] .hero::before {
        content: "‚öîÔ∏è";
      }
      
      [data-theme="rpg"] .hero::after {
        content: "üõ°Ô∏è";
      }
      
      [data-theme="rpg"] .level-rect {
        stroke-dasharray: none;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
      }
      
      [data-theme="rpg"] .character-card,
      [data-theme="rpg"] .quest-map-panel,
      [data-theme="rpg"] .quest-details-panel {
        border-width: 3px;
        border-style: double;
      }
    </style>
  </head>
  <body>
    <!-- Theme Toggle -->
    <div class="theme-toggle">
      <span class="theme-toggle-label">Theme:</span>
      <div class="theme-buttons">
        <button class="theme-btn active" onclick="setTheme('sci-fi')" id="scifiBtn">
          <span>üöÄ</span>
          <span>Sci-Fi</span>
        </button>
        <button class="theme-btn" onclick="setTheme('rpg')" id="rpgBtn">
          <span>‚öîÔ∏è</span>
          <span>RPG</span>
        </button>
      </div>
    </div>
    
    <div class="container">
      <header class="hero">
        <h1>Game Developer Survival Guide - Mikael Lagr√©</h1>
        <p>My personal journey through the video game industry from university up to where I'm at today.</p>
      </header>

      <!-- Character Section -->
      <div class="character-section">
        <aside class="character-card">
          <div class="character-avatar" id="characterAvatar">üë®‚Äçüíª</div>
          <div class="character-name" id="characterName">My name goes here</div>
          <div class="character-class" id="characterClass">Software Engineer</div>
          <div class="character-level" id="characterLevel">Level 1</div>
          
          <ul class="traits-list" id="traitsList">
            <!-- Traits will be populated here -->
          </ul>

          <div class="curses-section">
            <ul class="curses-list" id="cursesList">
              <!-- Curses will be populated here -->
            </ul>
          </div>

          <div class="stats-panel">
            <div class="stat-item">
              <span class="stat-label">Years in Industry:</span>
              <span class="stat-value" id="yearsInIndustry">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Games Shipped:</span>
              <span class="stat-value" id="gamesShipped">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Monsters Defeated:</span>
              <span class="stat-value" id="monstersDefeated">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Treasures Found:</span>
              <span class="stat-value" id="treasuresFound">0</span>
            </div>
          </div>
        </aside>

        <!-- Main Quest Board -->
        <main class="quest-board-container">
          <!-- Quest Map -->
          <div class="quest-map-panel">
            <div class="map-toolbar">
              <div class="map-title">
                <span>üó∫Ô∏è</span>
                <span>Quest Map</span>
              </div>
            </div>
            <div class="quest-map">
              <svg id="questBoard" viewBox="0 0 340 2800" preserveAspectRatio="none" style="height: 2800px;">
                <!-- SVG content will be generated by JavaScript -->
              </svg>
            </div>
          </div>

          <!-- Quest Details -->
          <aside class="quest-details-panel">
            <div class="details-toolbar">
              <div class="details-title">
                <span>üìú Quest Summary</span>
              </div>
            </div>
            <div class="quest-content" id="questContent">
              <div class="empty-state">
                <div class="empty-state-icon">üéØ</div>
                <div class="empty-state-text">
                  Click on a level node to view quest details and requirements
                </div>
              </div>
            </div>
          </aside>
        </main>
      </div>

      <footer>
        <p>GameDev Survival Guide | <a href="#" onclick="resetGame(); return false;">Reset Data</a></p>
      </footer>
    </div>

    <!-- Story Modal -->
    <div class="modal-overlay" id="storyModal">
      <div class="story-modal">
        <div class="modal-header">
          <h2 class="modal-title" id="modalTitle">Story Title</h2>
          <button class="modal-close" onclick="closeModal()">‚úï</button>
        </div>
        <div class="modal-body" id="modalBody">
          <!-- Story content will be inserted here -->
        </div>
      </div>
    </div>

    <script>
      // ==========================================
      // GAME DATA CONFIGURATION
      // ==========================================
      // Edit this section to customize your journey

      const myCharacter = {
        name: "Mikael Lagr√©", // Change this to your name
        class: "Software Engineer",
        avatar: "üë®‚Äçüíª", // Change emoji or use an image URL
        currentLevel: 20, // Your current level (1-20)
        traits: [
          { icon: "ü§î", name: "Problem Solver", description: "Loves solving puzzles between machines. Not so much between people." },
          { icon: "üé®", name: "Creative", description: "Creative in all areas including art, music and of course programming." },
          { icon: "ü§ù", name: "Team Player", description: "I want to make sure everyone belongs" }
        ],
        curses: [
          { icon: "üò∞", name: "Imposter Syndrome", description: "Always feeling like I don't belong or am good enough." },
          { icon: "üî•", name: "Sensitive to stress", description: "Don't handle stress to well." },
          { icon: "üéØ", name: "Perfectionism", description: "Nothing is ever quite good enough." }
        ],
        stats: {
          yearsInIndustry: 20,
          gamesShipped: 8,
          monstersDefeated: 0,
          treasuresFound: 0
        }
      };

      // Your journey through 20 levels
      const myJourney = {
        levels: [
          {
            id: 1,
            name: "Hello University",
            year: "Year 1 - 3",
            role: "Student at gsCEPT",
            emoji: "üëã",
            color: "#4a90e2",
            position: { x: 170, y: 2700 },
            myPath: true,
            
            quest: {
              title: "You can study game development!?",
              description: "Moved to Skellefte√• in northern Sweden and studied for 3 years. Learned to live on my own, took all-nighters to study for exams and had the perfect student lifestyle.",
              objectivesCompleted: [
                "Survived living on my own for the first time",
                "Learned working together with artist on larger projects",
                "Made my own 3d engine in OpenGL",
                "Became world champion in a video game"
              ],
              skillsAcquired: ["C++", "Working with artists", "General programming practices", "Advanced math and physics", "Cooking, cleaning, surviving", "Partying", "More partying", "Blender"]
            },
            
            treasures: [
              {
                type: "story",
                title: "How to tank the framerate in a first person game",
                content: "In one of the projects I was part of we made a simple FPS called Field of Fear. You controlled a little robot walking and finding mines on a minefield. One day we noticed that the framerate had come to a low 5 fps. Back then most games bottleneck was polygons so I went into wireframe mode to find out if anything was off. I saw some grass on the fields that looked shaded. I walked closer and saw that it was made of several thousand polygons. I went to the artist that had commited the art and asked if he made an error. It turned out he didn't know we had polygon limitations like that - he had mostly done art for film at this point. He asked how many polygons we should have and I said 5-10 would be enough. :) ",
                lesson: "Here is where I learned that not everyone will have the technical know-how as us programmers do and you shouldn't assume things. A clear tech requirements for other crafts written down would have helped us here and most things can be solved between crafts by just talking to each other."
              },
              {
                type: "project",
                title: "The Room - not just a great movie...",
                content: "... but it was also the project name of my own C++ engine based on OpenGL. I did rendering setup, content pipeline, camera, entities, light and shadow during 9 months. Back at this time Doom 3 had just released featuring a new technique called Shadow Volumes which I also added to my engine.",
                lesson: "This was non-stop coding for 9 months and one of the most productive times I've had.<p>I learned so much about the different areas in what it takes to make my own game engine. Being a solo dev focusing on programming and learning suited me perfectly here. There was never a dull moment but I did encounter some weird bugs that took many days to solve.<p> Looking back I'm glad I had the time to completly go into focus mode for these months. Although working with others would have prepared me more for my work career I feel looking back that at least once in a life you need a periods like this to go into Mastery of creating something for your own enjoyment."
              }
            ],
            
            monsters: [
              {
                name: "Is this really what I want to do?",
                icon: "üëπ",
                description: "Do I even like making games?",
                story: "Sometime during the second year I lost motivation to programming and wasn't sure if this was for me. I didn't feel like what I did mattered that much or that I was learning the right things.",
                defeated: "I eventually overcome this. Every now and then you will get to some low points and it doesn't mean your career paths are off - most often they might not be related at all. Since this event I've learned to love programming and solving problems many times over. I believe I wasn't feeling I got external validation for all my efforts (I studied hard but does anyone really care?). Later I realised that external validation comes and goes but your internal and intrisic motivation matters more."
              },
              {
                name: "I don't have what it takes",
                icon: "üëπ",
                description: "Failing exams",
                story: "One of the very first math exam I had I completly failed. I took the follow up exam and failed that one too. The third one... failed. At this point this particular exam was only done once a year so I had to wait up until I had completed all of my other exams and I had only this one left.",
                defeated: "The summer before I could try the exam again I setup part-time goals. The first week I would only open the book to read it about 20min a day. These lower effort goals made it less stressful and I could later move it higher to say something like 'solve 1 math problem each day'. The smaller goals led me to learn in a better pace and I was ready for the exam. I nailed it. In fact I got all the answer correct and since it was my final course I could graduate and take my master thesis."
              }
            ],
            notes: [
              "Coffee became my best friend",
              "Stack Overflow saved me daily"
            ]
          },
          
          {
            id: 2,
            name: "JAVA Master",
            year: "Year 3-4",
            role: "Master Thesis",
            emoji: "üêõ",
            color: "#5c8a3a",
            position: { x: 170, y: 2560 },
            myPath: true,
            
            quest: {
              title: "Becoming a JAVA expert at Agency 9",
              description: "For my Master Thesis I was working at a company called Agency 9. They were one of the first to introduce 3d on the web. My Master Thesis was about how to help their content pipeline become more effecient using a format called COLLADA.",
              objectivesCompleted: [
                "Helped open source development",
                "Made a plugin shipped in Blender 2.7",
                "Learned how to work with a customer",
                "Got my first job"
              ],
              skillsAcquired: ["JAVA", "COLLADA", "Blender expert", "Working in a real job"]
            },
            treasures: [{
                type: "story",
                title: "Contribute to open source",
                content: "In one of the projects I was part of we made a simple FPS called Field of Fear. You controlled a little robot walking and finding mines on a minefield. One day we noticed that the framerate had come to a low 5 fps. Back then most games bottleneck was polygons so I went into wireframe mode to find out if anything was off. I saw some grass on the fields that looked shaded. I walked closer and saw that it was made of several thousand polygons. I went to the artist that had commited the art and asked if he made an error. It turned out he didn't know we had polygon limitations like that - he had mostly done art for film at this point. He asked how many polygons we should have and I said 5-10 would be enough. :) ",
                lesson: "Here is where I learned that not everyone will have the technical know-how as us programmers do and you shouldn't assume things. A clear tech requirements for other crafts written down would have helped us here and most things can be solved between crafts by just talking to each other."
              }],
            monsters: [],
            notes: []
          },
          
          {
            id: 3,
            name: "Feature Builder",
            year: "Year 2",
            role: "Junior Engineer",
            emoji: "üî®",
            color: "#e85d75",
            position: { x: 170, y: 2420 },
            myPath: true,
            
            quest: {
              title: "Ship Your First Feature",
              description: "Design and implement a complete game feature from scratch.",
              objectivesCompleted: [
                "Design the feature architecture",
                "Implement core functionality",
                "Write comprehensive tests",
                "Get it through QA"
              ],
              skillsAcquired: ["System Design", "Implementation", "Testing"]
            },
            
            treasures: [],
            monsters: [
              {
                name: "Scope Creep",
                icon: "üêô",
                description: "The feature that kept growing",
                story: "What started as a simple feature...",
                defeated: "Learned to say no and define clear boundaries"
              }
            ],
            notes: []
          },
          
          {
            id: 4,
            name: "Team Player",
            year: "Year 2",
            role: "Software Engineer",
            emoji: "ü§ù",
            color: "#f39c12",
            position: { x: 170, y: 2280 },
            myPath: true,
            
            quest: {
              title: "Master Collaboration",
              description: "Learn to work effectively with designers, artists, and other developers.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 5,
            name: "Performance Wizard",
            year: "Year 3",
            role: "Software Engineer",
            emoji: "‚ö°",
            color: "#9b59b6",
            position: { x: 170, y: 2140 },
            myPath: true,
            
            quest: {
              title: "Optimization Quest",
              description: "Make the game run at 60 FPS on all platforms.",
              objectivesCompleted: [],
              skillsAcquired: ["Profiling", "Optimization", "Memory Management"]
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 6,
            name: "System Architect",
            year: "Year 3",
            role: "Software Engineer",
            emoji: "üèóÔ∏è",
            color: "#34495e",
            position: { x: 170, y: 2000 },
            myPath: true,
            
            quest: {
              title: "Design Major Systems",
              description: "Architect and implement core game systems.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 7,
            name: "Crisis Manager",
            year: "Year 4",
            role: "Senior Engineer",
            emoji: "üî•",
            color: "#e74c3c",
            position: { x: 170, y: 1860 },
            myPath: true,
            
            quest: {
              title: "Survive the Crunch",
              description: "Navigate through your first major crunch period.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            monsters: [
              {
                name: "Burnout Dragon",
                icon: "üê≤",
                description: "The exhaustion that threatens to consume you",
                story: "Three months of 70-hour weeks...",
                defeated: "Set boundaries and learned to prioritize health"
              }
            ],
            
            treasures: [],
            notes: []
          },
          
          {
            id: 8,
            name: "Mentor",
            year: "Year 4",
            role: "Senior Engineer",
            emoji: "üßô",
            color: "#3498db",
            position: { x: 170, y: 1720 },
            myPath: true,
            
            quest: {
              title: "Guide New Developers",
              description: "Help junior developers find their path.",
              objectivesCompleted: [],
              skillsAcquired: ["Mentoring", "Teaching", "Patience"]
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 9,
            name: "Tool Builder",
            year: "Year 5",
            role: "Senior Engineer",
            emoji: "üîß",
            color: "#16a085",
            position: { x: 170, y: 1580 },
            myPath: true,
            
            quest: {
              title: "Create Development Tools",
              description: "Build tools that make everyone's life easier.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 10,
            name: "Ship It!",
            year: "Year 5",
            role: "Senior Engineer",
            emoji: "üöÄ",
            color: "#27ae60",
            position: { x: 170, y: 1440 },
            myPath: true,
            
            quest: {
              title: "Launch Your First Game",
              description: "Experience the thrill and terror of launching a game.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [
              {
                type: "achievement",
                title: "First Game Shipped!",
                content: "The moment when millions of players experienced our work...",
                lesson: "Nothing beats seeing players enjoy your game"
              }
            ],
            
            monsters: [],
            notes: []
          },
          
          {
            id: 11,
            name: "Tech Lead",
            year: "Year 6",
            role: "Senior Engineer",
            emoji: "üéØ",
            color: "#8e44ad",
            position: { x: 170, y: 1300 },
            myPath: true,
            
            quest: {
              title: "Technical Leadership",
              description: "Lead technical decisions and guide the team's architecture.",
              objectivesCompleted: [],
              skillsAcquired: ["Architecture", "Leadership", "Communication"]
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 12,
            name: "Domain Expert",
            year: "Year 7",
            role: "Principal Engineer",
            emoji: "üëë",
            color: "#d35400",
            position: { x: 170, y: 1160 },
            myPath: true,
            
            quest: {
              title: "Master Your Domain",
              description: "Become the go-to expert in your specialization.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 13,
            name: "Code Architect",
            year: "Year 8",
            role: "Principal Engineer",
            emoji: "üèõÔ∏è",
            color: "#2c3e50",
            position: { x: 170, y: 1020 },
            myPath: true,
            
            quest: {
              title: "Design at Scale",
              description: "Architect systems that can handle millions of players.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 14,
            name: "Innovation Driver",
            year: "Year 9",
            role: "Principal Engineer",
            emoji: "üí°",
            color: "#f1c40f",
            position: { x: 170, y: 880 },
            myPath: true,
            
            quest: {
              title: "Push Technical Boundaries",
              description: "Implement cutting-edge technology in production.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 15,
            name: "Platform Builder",
            year: "Year 10",
            role: "Principal Engineer",
            emoji: "üåê",
            color: "#1abc9c",
            position: { x: 170, y: 740 },
            myPath: true,
            
            quest: {
              title: "Lead Technical Excellence",
              description: "Guide technical decisions across multiple teams.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 16,
            name: "Industry Expert",
            year: "Year 11",
            role: "Distinguished Engineer",
            emoji: "üèÜ",
            color: "#e67e22",
            position: { x: 170, y: 600 },
            myPath: true,
            
            quest: {
              title: "Build the Foundation",
              description: "Create platforms that empower other developers.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 17,
            name: "Technical Director",
            year: "Year 12",
            role: "Distinguished Engineer",
            emoji: "üé¨",
            color: "#c0392b",
            position: { x: 170, y: 460 },
            myPath: true,
            
            quest: {
              title: "Industry Recognition",
              description: "Become known in the wider game development community.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 18,
            name: "Master Craftsman",
            year: "Year 13",
            role: "Distinguished Engineer",
            emoji: "‚ú®",
            color: "#8b4513",
            position: { x: 170, y: 320 },
            myPath: true,
            
            quest: {
              title: "Shape the Future",
              description: "Define technical vision for entire projects.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 19,
            name: "Legendary Status",
            year: "Year 14",
            role: "Distinguished Engineer",
            emoji: "üéÜ",
            color: "#663399",
            position: { x: 170, y: 180 },
            myPath: true,
            
            quest: {
              title: "Legendary Status",
              description: "Your expertise is sought after industry-wide.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [],
            monsters: [],
            notes: []
          },
          
          {
            id: 20,
            name: "Mastery",
            year: "Year 15+",
            role: "Technical Fellow",
            emoji: "üíé",
            color: "#ffd700",
            position: { x: 170, y: 40 },
            myPath: true,
            
            quest: {
              title: "Technical Mastery Achieved",
              description: "You've reached the pinnacle of technical excellence.",
              objectivesCompleted: [],
              skillsAcquired: []
            },
            
            treasures: [
              {
                type: "legendary",
                title: "The Master's Wisdom",
                content: "After all these years, the most important lesson is...",
                lesson: "The journey never really ends, it just gets more interesting"
              }
            ],
            
            monsters: [],
            notes: []
          }
        ],
        
        // Global curses that can appear at multiple levels
        globalCurses: [
          {
            name: "Imposter Syndrome",
            icon: "üëπ",
            appearsAt: [1, 5, 8, 12],
            description: "The persistent feeling of not being good enough"
          },
          {
            name: "Burnout Dragon",
            icon: "üê≤",
            appearsAt: [7, 14, 18],
            description: "Exhaustion from overwork"
          },
          {
            name: "Scope Creep",
            icon: "üêô",
            appearsAt: [3, 9, 15],
            description: "Features that grow beyond control"
          }
        ]
      };

      // ==========================================
      // GAME ENGINE
      // ==========================================
      
      let gameState = {
        selectedLevel: null
      };

      // Initialize the game
      function init() {
        // No longer loading saved state - using constant data
        loadTheme();
        updateCharacterStats();
        renderCharacter();
        renderQuestMap();
        setupEventListeners();
      }
      
      // Theme Management
      function loadTheme() {
        const savedTheme = localStorage.getItem('gamedevTheme') || 'sci-fi';
        setTheme(savedTheme);
      }
      
      function setTheme(theme) {
        const body = document.body;
        const scifiBtn = document.getElementById('scifiBtn');
        const rpgBtn = document.getElementById('rpgBtn');
        
        if (theme === 'rpg') {
          body.setAttribute('data-theme', 'rpg');
          rpgBtn.classList.add('active');
          scifiBtn.classList.remove('active');
        } else {
          body.removeAttribute('data-theme');
          scifiBtn.classList.add('active');
          rpgBtn.classList.remove('active');
        }
        
        localStorage.setItem('gamedevTheme', theme);
      }
      
      // Update character stats based on initial values
      function updateCharacterStats() {
        // Stats are now manually set in the myCharacter object
        // This function is kept for compatibility but doesn't calculate anything
      }

      // Render character card
      function renderCharacter() {
        document.getElementById('characterAvatar').textContent = myCharacter.avatar;
        document.getElementById('characterName').textContent = myCharacter.name;
        document.getElementById('characterClass').textContent = myCharacter.class;
        document.getElementById('characterLevel').textContent = `Level ${myCharacter.currentLevel}`;
        
        // Render traits
        const traitsList = document.getElementById('traitsList');
        traitsList.innerHTML = myCharacter.traits.map(trait => `
          <li class="trait-item">
            <span class="trait-icon">${trait.icon}</span>
            <div>
              <div style="font-weight: 600;">${trait.name}</div>
              <div style="font-size: 0.75rem; color: var(--text-muted);">${trait.description}</div>
            </div>
          </li>
        `).join('');
        
        // Render curses
        const cursesList = document.getElementById('cursesList');
        cursesList.innerHTML = myCharacter.curses.map(curse => `
          <li class="curse-item">
            <span class="curse-icon">${curse.icon}</span>
            <div>
              <div style="font-weight: 600;">${curse.name}</div>
              <div style="font-size: 0.75rem; color: var(--text-muted);">${curse.description}</div>
            </div>
          </li>
        `).join('');
        
        // Update stats
        document.getElementById('yearsInIndustry').textContent = myCharacter.stats.yearsInIndustry;
        document.getElementById('gamesShipped').textContent = myCharacter.stats.gamesShipped;
        document.getElementById('monstersDefeated').textContent = myCharacter.stats.monstersDefeated;
        document.getElementById('treasuresFound').textContent = myCharacter.stats.treasuresFound;
      }

      // Render the quest map
      function renderQuestMap() {
        const svg = document.getElementById('questBoard');
        svg.innerHTML = '';
        
        // Draw arrows between levels
        for (let i = 0; i < myJourney.levels.length - 1; i++) {
          const fromLevel = myJourney.levels[i];
          const toLevel = myJourney.levels[i + 1];
          drawArrow(svg, fromLevel.position, toLevel.position);
        }
        
        // Draw level rectangles from bottom to top
        myJourney.levels.forEach(level => {
          drawLevelRect(svg, level);
        });
        
        // Scroll to bottom (Level 1) after rendering
        setTimeout(() => {
          const questMap = document.querySelector('.quest-map');
          if (questMap) {
            questMap.scrollTop = questMap.scrollHeight;
          }
        }, 100);
      }

      // Draw a level rectangle
      function drawLevelRect(svg, level) {
        const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        g.setAttribute('class', 'level-group');
        g.onclick = () => selectLevel(level.id);
        
        // Rectangle
        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('x', level.position.x - 150);
        rect.setAttribute('y', level.position.y - 60);
        rect.setAttribute('width', '300');
        rect.setAttribute('height', '120');
        rect.setAttribute('class', `level-rect ${getLevelClass(level)}`);
        rect.setAttribute('fill', level.color || '#2c3e50');
        rect.setAttribute('stroke', 'rgba(255, 255, 255, 0.3)');
        g.appendChild(rect);
        
        // Level number
        const number = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        number.setAttribute('x', level.position.x - 130);
        number.setAttribute('y', level.position.y - 30);
        number.setAttribute('class', 'level-text level-number');
        number.setAttribute('text-anchor', 'start');
        number.setAttribute('fill', 'rgba(255,255,255,0.9)');
        number.textContent = level.id < 10 ? `0${level.id}` : level.id;
        g.appendChild(number);
        
        // Emoji
        const emoji = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        emoji.setAttribute('x', level.position.x - 85);
        emoji.setAttribute('y', level.position.y - 30);
        emoji.setAttribute('class', 'level-emoji');
        emoji.setAttribute('text-anchor', 'middle');
        emoji.setAttribute('opacity', '1');
        emoji.textContent = level.emoji || 'üéØ';
        g.appendChild(emoji);
        
        // Level name
        const name = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        name.setAttribute('x', level.position.x);
        name.setAttribute('y', level.position.y - 35);
        name.setAttribute('class', 'level-text level-name');
        name.setAttribute('text-anchor', 'middle');
        name.setAttribute('fill', 'var(--text-primary)');
        name.textContent = level.name;
        g.appendChild(name);
        
        // Year
        const year = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        year.setAttribute('x', level.position.x);
        year.setAttribute('y', level.position.y - 10);
        year.setAttribute('class', 'level-text level-year');
        year.setAttribute('text-anchor', 'middle');
        year.setAttribute('fill', 'rgba(255,255,255,0.7)');
        year.textContent = level.year;
        g.appendChild(year);
        
        // Role
        const role = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        role.setAttribute('x', level.position.x);
        role.setAttribute('y', level.position.y + 10);
        role.setAttribute('class', 'level-text level-role');
        role.setAttribute('text-anchor', 'middle');
        role.setAttribute('fill', 'rgba(255,255,255,0.8)');
        role.textContent = level.role || '';
        g.appendChild(role);
        
        // Quest description (summary)
        if (level.quest && level.quest.description) {
          const descText = level.quest.description;
          const maxLength = 35; // Limit characters per line for wider box
          const words = descText.split(' ');
          let lines = [];
          let currentLine = '';
          
          for (const word of words) {
            if ((currentLine + ' ' + word).length <= maxLength) {
              currentLine = currentLine ? currentLine + ' ' + word : word;
            } else {
              if (currentLine) lines.push(currentLine);
              currentLine = word;
            }
          }
          if (currentLine) lines.push(currentLine);
          
          // Limit to 2 lines
          lines = lines.slice(0, 2);
          if (lines.length === 2 && descText.length > maxLength * 2) {
            lines[1] = lines[1].substring(0, lines[1].length - 3) + '...';
          }
          
          lines.forEach((line, index) => {
            const desc = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            desc.setAttribute('x', level.position.x);
            desc.setAttribute('y', level.position.y + 35 + (index * 12));
            desc.setAttribute('class', 'level-text');
            desc.setAttribute('text-anchor', 'middle');
            desc.setAttribute('fill', 'rgba(255,255,255,0.6)');
            desc.setAttribute('font-size', '10px');
            desc.textContent = line;
            g.appendChild(desc);
          });
        }
        
        svg.appendChild(g);
      }

      // Draw arrow between levels
      function drawArrow(svg, from, to) {
        const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        
        // Arrow line
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        const startY = from.y - 60;
        const endY = to.y + 60;
        path.setAttribute('d', `M ${from.x} ${startY} L ${to.x} ${endY}`);
        path.setAttribute('class', 'arrow-path');
        g.appendChild(path);
        
        // Arrow head
        const arrowHead = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
        const arrowSize = 8;
        const points = `${to.x},${endY - arrowSize} ${to.x - arrowSize/2},${endY} ${to.x + arrowSize/2},${endY}`;
        arrowHead.setAttribute('points', points);
        arrowHead.setAttribute('class', 'arrow-head');
        g.appendChild(arrowHead);
        
        svg.appendChild(g);
      }

      // Get CSS class for level based on state
      function getLevelClass(level) {
        // All levels are now just informational nodes
        return 'available';
      }

      // Select a level
      function selectLevel(levelId) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level) return;
        
        gameState.selectedLevel = levelId;
        displayQuestDetails(level);
      }

      // Removed branch selection - no longer needed

      // Display quest details
      function displayQuestDetails(level) {
        const content = document.getElementById('questContent');
        
        content.innerHTML = `
          <div class="quest-header">${level.emoji || ''} ${level.name}</div>
          <div class="quest-year">${level.year} ‚Ä¢ ${level.role || ''}</div>
          <div class="quest-description">${level.quest.description}</div>
          
          ${level.quest.objectivesCompleted && level.quest.objectivesCompleted.length > 0 ? `
            <div class="quest-objectives">
              <div class="objectives-title">üìã Objectives Completed</div>
              ${level.quest.objectivesCompleted.map(obj => `
                <div class="objective-item">${obj}</div>
              `).join('')}
            </div>
          ` : ''}
          
          ${level.quest.skillsAcquired && level.quest.skillsAcquired.length > 0 ? `
            <div class="quest-skills">
              <div class="skills-title">üéØ Skills Acquired</div>
              ${level.quest.skillsAcquired.map(skill => `
                <span class="skill-tag">${skill}</span>
              `).join('')}
            </div>
          ` : ''}
          
          ${level.treasures && level.treasures.length > 0 ? `
            <div class="quest-objectives" style="background: rgba(255, 215, 0, 0.1); border-color: rgba(255, 215, 0, 0.3);">
              <div class="objectives-title" style="color: var(--neon-yellow); text-shadow: 0 0 5px var(--neon-yellow);">
                üíé Treasures Found
              </div>
              ${level.treasures.map((treasure, index) => `
                <div class="objective-item" style="cursor: pointer;" onclick="showTreasureModalByIndex(${level.id}, ${index})">
                  ${treasure.title} ‚Üí
                </div>
              `).join('')}
            </div>
          ` : ''}
          
          ${level.monsters && level.monsters.length > 0 ? `
            <div class="quest-objectives" style="background: rgba(255, 0, 110, 0.1); border-color: rgba(255, 0, 110, 0.3);">
              <div class="objectives-title" style="color: var(--neon-pink); text-shadow: 0 0 5px var(--neon-pink);">
                üëæ Monsters Defeated
              </div>
              ${level.monsters.map((monster, index) => `
                <div class="objective-item" style="cursor: pointer;" onclick="showMonsterModalByIndex(${level.id}, ${index})">
                  ${monster.icon || 'üëæ'} ${monster.name} ‚Üí
                </div>
              `).join('')}
            </div>
          ` : ''}
          
          
        `;
      }

      // Add helper functions for showing specific treasure/monster by index
      function showTreasureModalByIndex(levelId, treasureIndex) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level || !level.treasures || !level.treasures[treasureIndex]) return;
        
        const treasure = level.treasures[treasureIndex];
        showStoryModal('üíé Treasure Found!', treasure);
      }
      
      function showMonsterModalByIndex(levelId, monsterIndex) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level || !level.monsters || !level.monsters[monsterIndex]) return;
        
        const monster = level.monsters[monsterIndex];
        showMonsterModalContent(monster);
      }


      // Show treasures modal
      function showTreasures(levelId) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level || !level.treasures || level.treasures.length === 0) return;
        
        const treasure = level.treasures[0]; // Show first treasure for now
        showStoryModal('üíé Treasure Found!', treasure);
      }

      // Show monsters modal
      function showMonsters(levelId) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level || !level.monsters || level.monsters.length === 0) return;
        
        const monster = level.monsters[0]; // Show first monster for now
        showMonsterModalContent(monster);
      }

      // Show notes modal
      function showNotes(levelId) {
        const level = myJourney.levels.find(l => l.id === levelId);
        if (!level || !level.notes || level.notes.length === 0) return;
        
        showNotesModal(level.notes);
      }

      // Show story modal
      function showStoryModal(title, story) {
        const modal = document.getElementById('storyModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        
        modalTitle.textContent = title;
        modalBody.innerHTML = `
          <div class="story-type">${story.type || 'story'}</div>
          <h3 style="color: var(--neon-cyan); margin-bottom: 1rem;">${story.title}</h3>
          <div class="story-content">${story.content}</div>
          ${story.lesson ? `
            <div class="story-lesson">
              <div class="story-lesson-title">üí° Lesson Learned</div>
              <div class="story-lesson-text">${story.lesson}</div>
            </div>
          ` : ''}
        `;
        
        modal.classList.add('active');
      }

      // Show monster modal content
      function showMonsterModalContent(monster) {
        const modal = document.getElementById('storyModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        
        modalTitle.textContent = `${monster.icon} ${monster.name}`;
        modalBody.innerHTML = `
          <div class="story-type">monster</div>
          <div style="color: var(--neon-pink); margin-bottom: 1rem;">${monster.description}</div>
          <div class="story-content">${monster.story}</div>
          <div class="story-lesson">
            <div class="story-lesson-title">‚öîÔ∏è How I Defeated It</div>
            <div class="story-lesson-text">${monster.defeated}</div>
          </div>
        `;
        
        modal.classList.add('active');
      }

      // Show notes modal
      function showNotesModal(notes) {
        const modal = document.getElementById('storyModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        
        modalTitle.textContent = 'üìù Notes & Observations';
        modalBody.innerHTML = `
          <div class="story-type">notes</div>
          <ul style="list-style: none; padding: 0;">
            ${notes.map(note => `
              <li style="padding: 0.75rem; margin-bottom: 0.5rem; background: rgba(0, 245, 255, 0.1); border-left: 3px solid var(--neon-cyan); border-radius: var(--radius-sm);">
                ${note}
              </li>
            `).join('')}
          </ul>
        `;
        
        modal.classList.add('active');
      }

      // Close modal
      function closeModal() {
        document.getElementById('storyModal').classList.remove('active');
      }

      // Removed reset view and toggle paths functions - buttons no longer exist


      // Reset game
      function resetGame() {
        if (confirm('‚ö†Ô∏è Reset to default data?')) {
          localStorage.removeItem('gamedevQuestState');
          location.reload();
        }
      }


      // Setup event listeners
      function setupEventListeners() {
        // Close modal on escape
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            closeModal();
          }
        });
        
        // Close modal on overlay click
        document.getElementById('storyModal').addEventListener('click', (e) => {
          if (e.target.id === 'storyModal') {
            closeModal();
          }
        });
      }

      // Initialize on load
      document.addEventListener('DOMContentLoaded', init);
      
      // Make functions available globally for onclick handlers
      window.setTheme = setTheme;
      window.closeModal = closeModal;
      window.resetGame = resetGame;
      window.showTreasureModalByIndex = showTreasureModalByIndex;
      window.showMonsterModalByIndex = showMonsterModalByIndex;
    </script>
  </body>
</html>